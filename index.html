
<!DOCTYPE html>

<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DIRKX-OS v2.4</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=VT323&display=swap');

:root {
â€“amber: #ffb000;
â€“amber-dim: #7a5200;
â€“amber-bright: #ffd060;
â€“amber-glow: rgba(255,176,0,0.15);
â€“bg: #0a0800;
â€“bg2: #110e00;
â€“scanline: rgba(0,0,0,0.35);
â€“border: #3a2a00;
}

- { margin:0; padding:0; box-sizing:border-box; }

body {
background: var(â€“bg);
color: var(â€“amber);
font-family: â€˜Share Tech Monoâ€™, monospace;
height: 100vh;
overflow: hidden;
cursor: default;
user-select: none;
}

/* CRT effect */
body::before {
content:â€™â€™;
position:fixed;
inset:0;
background: repeating-linear-gradient(
0deg,
var(â€“scanline) 0px,
var(â€“scanline) 1px,
transparent 1px,
transparent 3px
);
pointer-events:none;
z-index:9999;
animation: scanmove 8s linear infinite;
}
body::after {
content:â€™â€™;
position:fixed;
inset:0;
background: radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.7) 100%);
pointer-events:none;
z-index:9998;
}
@keyframes scanmove {
from { background-position: 0 0; }
to { background-position: 0 100px; }
}

/* BOOT SCREEN */
#boot {
position:fixed;
inset:0;
background:#0a0800;
z-index:5000;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
gap:6px;
}
#boot.hidden { display:none; }
.boot-line {
font-family:â€˜VT323â€™,monospace;
font-size:1.2rem;
color: var(â€“amber-dim);
opacity:0;
animation: fadein 0.1s forwards;
}
.boot-line.bright { color: var(â€“amber); }
@keyframes fadein { to { opacity:1; } }

/* TASKBAR */
#taskbar {
position:fixed;
bottom:0; left:0; right:0;
height:36px;
background:#0e0b00;
border-top:1px solid var(â€“amber-dim);
display:flex;
align-items:center;
padding:0 12px;
gap:10px;
z-index:1000;
}
#start-btn {
background: var(â€“amber);
color: #0a0800;
font-family:â€˜VT323â€™,monospace;
font-size:1.1rem;
padding:2px 12px;
cursor:pointer;
border:none;
letter-spacing:2px;
}
#start-btn:hover { background: var(â€“amber-bright); }

.task-clock {
margin-left:auto;
font-size:0.85rem;
color:var(â€“amber-dim);
letter-spacing:1px;
}

.taskbar-app {
font-size:0.8rem;
color:var(â€“amber-dim);
border:1px solid var(â€“amber-dim);
padding:1px 8px;
cursor:pointer;
white-space:nowrap;
}
.taskbar-app:hover, .taskbar-app.active { color:var(â€“amber); border-color:var(â€“amber); }

/* START MENU */
#start-menu {
position:fixed;
bottom:36px;
left:0;
width:220px;
background:#0e0b00;
border:1px solid var(â€“amber-dim);
border-bottom:none;
z-index:2000;
display:none;
}
#start-menu.open { display:block; }
#start-menu .sm-header {
background:var(â€“amber);
color:#0a0800;
font-family:â€˜VT323â€™,monospace;
font-size:1.4rem;
padding:6px 12px;
letter-spacing:3px;
}
#start-menu ul { list-style:none; }
#start-menu ul li {
padding:8px 16px;
cursor:pointer;
border-bottom:1px solid #1a1400;
font-size:0.85rem;
display:flex;
align-items:center;
gap:8px;
}
#start-menu ul li:hover { background:var(â€“amber-glow); color:var(â€“amber-bright); }
#start-menu ul li .ico { width:18px; text-align:center; }

/* DESKTOP */
#desktop {
position:fixed;
inset:0;
bottom:36px;
overflow:hidden;
}

/* DESKTOP ICONS */
.desk-icon {
position:absolute;
display:flex;
flex-direction:column;
align-items:center;
gap:4px;
width:72px;
padding:6px;
cursor:pointer;
}
.desk-icon:hover .icon-box { border-color:var(â€“amber); box-shadow:0 0 10px var(â€“amber-glow); }
.desk-icon:hover .icon-label { color:var(â€“amber-bright); }
.icon-box {
width:44px;
height:44px;
border:1px solid var(â€“amber-dim);
display:flex;
align-items:center;
justify-content:center;
font-size:1.5rem;
background:#110e00;
transition:all 0.15s;
}
.icon-label {
font-size:0.68rem;
color:var(â€“amber-dim);
text-align:center;
line-height:1.2;
}

/* WINDOWS */
.win {
position:absolute;
min-width:300px;
min-height:200px;
background:#0e0b00;
border:1px solid var(â€“amber-dim);
box-shadow:0 0 30px rgba(255,176,0,0.08);
display:none;
flex-direction:column;
z-index:100;
}
.win.open { display:flex; }
.win-titlebar {
background:var(â€“amber-dim);
padding:4px 8px;
display:flex;
align-items:center;
gap:8px;
cursor:grab;
font-family:â€˜VT323â€™,monospace;
font-size:1.1rem;
color: var(â€“amber-bright);
letter-spacing:1px;
}
.win-titlebar:active { cursor:grabbing; }
.win-close {
margin-left:auto;
cursor:pointer;
background:none;
border:1px solid var(â€“amber);
color:var(â€“amber);
font-family:â€˜VT323â€™,monospace;
font-size:1rem;
width:20px;
height:20px;
display:flex;
align-items:center;
justify-content:center;
line-height:1;
}
.win-close:hover { background:var(â€“amber); color:#0a0800; }
.win-body {
padding:14px;
flex:1;
overflow-y:auto;
font-size:0.82rem;
line-height:1.8;
}
.win-body::-webkit-scrollbar { width:6px; }
.win-body::-webkit-scrollbar-track { background:#0a0800; }
.win-body::-webkit-scrollbar-thumb { background:var(â€“amber-dim); }

/* Link list */
.link-list { list-style:none; }
.link-list li {
border-bottom:1px solid #1a1400;
padding:8px 0;
display:flex;
align-items:center;
gap:8px;
}
.link-list li::before { content:â€˜â–¶â€™; color:var(â€“amber-dim); font-size:0.7rem; }
.link-list a {
color:var(â€“amber);
text-decoration:none;
letter-spacing:0.5px;
}
.link-list a:hover { color:var(â€“amber-bright); text-decoration:underline; }
.link-tag {
margin-left:auto;
font-size:0.68rem;
color:var(â€“amber-dim);
border:1px solid var(â€“amber-dim);
padding:1px 5px;
}

/* TERMINAL WINDOW */
#term-output {
min-height:160px;
max-height:260px;
overflow-y:auto;
margin-bottom:8px;
font-size:0.8rem;
line-height:1.6;
}
#term-output::-webkit-scrollbar { width:4px; }
#term-output::-webkit-scrollbar-thumb { background:var(â€“amber-dim); }
.term-line { color:var(â€“amber-dim); }
.term-line.cmd { color:var(â€“amber); }
.term-line.err { color:#cc4400; }
.term-line.ok { color:#88cc00; }
.term-input-row {
display:flex;
align-items:center;
gap:6px;
border-top:1px solid var(â€“border);
padding-top:8px;
}
.term-prompt { color:var(â€“amber-dim); }
#term-input {
background:none;
border:none;
outline:none;
color:var(â€“amber);
font-family:â€˜Share Tech Monoâ€™,monospace;
font-size:0.82rem;
flex:1;
caret-color:var(â€“amber);
}

/* SYSLOG */
#syslog-body {
font-size:0.75rem;
line-height:1.7;
color:var(â€“amber-dim);
}
.slog-ok { color:#88cc00; }
.slog-warn { color:#cc8800; }
.slog-err { color:#cc4400; }

/* ABOUT */
.about-ascii {
font-family:â€˜VT323â€™,monospace;
font-size:0.9rem;
color:var(â€“amber-dim);
line-height:1.3;
margin-bottom:12px;
}
.spec-row { display:flex; gap:8px; color:var(â€“amber-dim); }
.spec-key { min-width:100px; color:var(â€“amber); }

/* VAULT locked */
.locked-msg {
text-align:center;
padding:30px 10px;
color:var(â€“amber-dim);
font-family:â€˜VT323â€™,monospace;
font-size:1.4rem;
}
.locked-msg .lock-ico { font-size:3rem; margin-bottom:10px; }
.pin-row { display:flex; gap:8px; margin-top:16px; justify-content:center; }
.pin-btn {
background:none;
border:1px solid var(â€“amber-dim);
color:var(â€“amber-dim);
font-family:â€˜VT323â€™,monospace;
font-size:1.2rem;
width:36px;
height:36px;
cursor:pointer;
}
.pin-btn:hover { border-color:var(â€“amber); color:var(â€“amber); }
#pin-display {
font-family:â€˜VT323â€™,monospace;
font-size:1.5rem;
letter-spacing:8px;
text-align:center;
margin-top:10px;
color:var(â€“amber);
min-height:30px;
}

/* Status bar in window */
.win-status {
border-top:1px solid var(â€“border);
padding:3px 10px;
font-size:0.7rem;
color:var(â€“amber-dim);
display:flex;
gap:16px;
}

/* Achievement */
#achievement {
position:fixed;
top:16px;
right:16px;
background:#0e0b00;
border:1px solid var(â€“amber);
padding:10px 16px;
font-family:â€˜VT323â€™,monospace;
font-size:1.1rem;
color:var(â€“amber);
z-index:9000;
display:none;
animation:slidein 0.3s ease;
max-width:280px;
}
@keyframes slidein {
from { transform:translateX(120%); opacity:0; }
to { transform:translateX(0); opacity:1; }
}

/* Blink cursor */
@keyframes blink { 50%{opacity:0} }
.blink { animation:blink 1s step-start infinite; }

/* Resize handle */
.win-resize {
position:absolute;
bottom:0; right:0;
width:14px; height:14px;
cursor:se-resize;
color:var(â€“amber-dim);
font-size:0.8rem;
display:flex;
align-items:flex-end;
justify-content:flex-end;
padding:2px;
}

/* KONAMI hint */
#konami-bar {
position:fixed;
top:0; left:0; right:0;
height:2px;
background:transparent;
z-index:8000;
transition:background 0.5s;
}
#konami-bar.active { background:linear-gradient(90deg, var(â€“amber), var(â€“amber-bright), var(â€“amber)); }

</style>
</head>
<body>

<!-- BOOT -->

<div id="boot"></div>

<!-- ACHIEVEMENT -->

<div id="achievement" id="ach"></div>
<div id="konami-bar"></div>

<!-- DESKTOP -->

<div id="desktop">

 <!-- Icons -->

 <div class="desk-icon" style="top:20px;left:20px" onclick="openWin('win-media')">
   <div class="icon-box">ğŸ“º</div>
   <div class="icon-label">FREE MEDIA</div>
 </div>
 <div class="desk-icon" style="top:120px;left:20px" onclick="openWin('win-books')">
   <div class="icon-box">ğŸ“š</div>
   <div class="icon-label">BIBLIOTHEEK</div>
 </div>
 <div class="desk-icon" style="top:220px;left:20px" onclick="openWin('win-vault')">
   <div class="icon-box">ğŸ”</div>
   <div class="icon-label">VAULT</div>
 </div>
 <div class="desk-icon" style="top:320px;left:20px" onclick="openWin('win-term')">
   <div class="icon-box">âŒ¨ï¸</div>
   <div class="icon-label">TERMINAL</div>
 </div>
 <div class="desk-icon" style="top:20px;left:100px" onclick="openWin('win-about')">
   <div class="icon-box">âš™ï¸</div>
   <div class="icon-label">SYSTEEM INFO</div>
 </div>
 <div class="desk-icon" style="top:120px;left:100px" onclick="openWin('win-syslog')">
   <div class="icon-box">ğŸ“‹</div>
   <div class="icon-label">SYS LOG</div>
 </div>

 <!-- WINDOW: FREE MEDIA -->

 <div class="win" id="win-media" style="top:60px;left:200px;width:420px;">
   <div class="win-titlebar" data-win="win-media">
     <span>ğŸ“º</span> FREE MEDIA â€” DIRKX-OS
     <button class="win-close" onclick="closeWin('win-media')">âœ•</button>
   </div>
   <div class="win-body">
     <ul class="link-list">
       <li>
         <a href="https://1movies.bz/home" target="_blank">1Movies</a>
         <span class="link-tag">FILMS/SERIES</span>
       </li>
       <li>
         <a href="https://fmhy.net" target="_blank">FMHY â€” Free Media Heck Yeah</a>
         <span class="link-tag">DIRECTORY</span>
       </li>
       <li>
         <a href="https://rentry.co/megathread" target="_blank">MEGATHREAD</a>
         <span class="link-tag">GEAVANCEERD</span>
       </li>
     </ul>
   </div>
   <div class="win-status"><span>STATUS: ONLINE</span><span>ENCRYPTIE: GEEN</span></div>
   <div class="win-resize">â—¢</div>
 </div>

 <!-- WINDOW: BOEKEN -->

 <div class="win" id="win-books" style="top:100px;left:260px;width:380px;">
   <div class="win-titlebar" data-win="win-books">
     <span>ğŸ“š</span> BIBLIOTHEEK
     <button class="win-close" onclick="closeWin('win-books')">âœ•</button>
   </div>
   <div class="win-body">
     <ul class="link-list">
       <li>
         <a href="https://annas-archive.li" target="_blank">Anna's Archive</a>
         <span class="link-tag">BOEKEN/PDF</span>
       </li>
     </ul>
     <p style="margin-top:16px;color:var(--amber-dim);font-size:0.78rem;">
       Toegang tot miljoenen titels. Gebruik verantwoord.
     </p>
   </div>
   <div class="win-status"><span>RECORDS: âˆ</span></div>
   <div class="win-resize">â—¢</div>
 </div>

 <!-- WINDOW: VAULT (PIN) -->

 <div class="win" id="win-vault" style="top:80px;left:300px;width:360px;">
   <div class="win-titlebar" data-win="win-vault">
     <span>ğŸ”</span> VAULT â€” TOEGANGSCONTROLE
     <button class="win-close" onclick="closeWin('win-vault')">âœ•</button>
   </div>
   <div class="win-body" id="vault-body">
     <div class="locked-msg" id="vault-locked">
       <div class="lock-ico">ğŸ”’</div>
       <div>CLEARANCE VEREIST</div>
       <div style="font-size:0.9rem;margin-top:6px;color:var(--amber-dim)">Voer PIN in: gebruik terminal of knop hieronder</div>
       <div id="pin-display">_ _ _ _</div>
       <div class="pin-row" id="pin-buttons"></div>
       <div style="margin-top:8px;font-size:0.8rem;color:var(--amber-dim)">Of type <span style="color:var(--amber)">unlock</span> in Terminal</div>
     </div>
     <div id="vault-unlocked" style="display:none">
       <ul class="link-list">
         <li><a href="https://fmhy.net" target="_blank">FMHY.NET</a><span class="link-tag">CORE</span></li>
         <li><a href="https://rentry.co/megathread" target="_blank">MEGATHREAD</a><span class="link-tag">INDUSTRIAL</span></li>
       </ul>
       <p style="margin-top:12px;color:var(--amber-dim);font-size:0.75rem;">âš  CLEARANCE: INDUSTRIAL CORE â€” Gebruik met discretie</p>
     </div>
   </div>
   <div class="win-status"><span id="vault-status">VERGRENDELD</span></div>
   <div class="win-resize">â—¢</div>
 </div>

 <!-- WINDOW: TERMINAL -->

 <div class="win" id="win-term" style="top:140px;left:180px;width:480px;">
   <div class="win-titlebar" data-win="win-term">
     <span>âŒ¨ï¸</span> DIRKX TERMINAL v2.4
     <button class="win-close" onclick="closeWin('win-term')">âœ•</button>
   </div>
   <div class="win-body">
     <div id="term-output">
       <div class="term-line">DIRKX-OS Terminal v2.4 â€” type <span style="color:var(--amber)">help</span> voor commando's</div>
     </div>
     <div class="term-input-row">
       <span class="term-prompt">DIRKX:~$</span>
       <input type="text" id="term-input" autocomplete="off" spellcheck="false" />
       <span class="blink">â–ˆ</span>
     </div>
   </div>
   <div class="win-status"><span>SHELL: DIRKX-SH</span><span>SESSION: ACTIVE</span></div>
   <div class="win-resize">â—¢</div>
 </div>

 <!-- WINDOW: ABOUT -->

 <div class="win" id="win-about" style="top:50px;left:220px;width:400px;">
   <div class="win-titlebar" data-win="win-about">
     <span>âš™ï¸</span> SYSTEEM INFO
     <button class="win-close" onclick="closeWin('win-about')">âœ•</button>
   </div>
   <div class="win-body">
     <div class="about-ascii">
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•
â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•  â•šâ–ˆâ–ˆâ–ˆâ•”â•
â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—
â•šâ•â•â•â•â•â• â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•</div>
     <div class="spec-row"><span class="spec-key">OS</span><span>DIRKX-OS v2.4</span></div>
     <div class="spec-row"><span class="spec-key">KERN</span><span>Metal Â· Systems Â· Economy</span></div>
     <div class="spec-row"><span class="spec-key">CLEARANCE</span><span id="about-clearance">STANDARD</span></div>
     <div class="spec-row"><span class="spec-key">UPTIME</span><span id="uptime">00:00:00</span></div>
     <div class="spec-row"><span class="spec-key">MEDIA DB</span><span>ONLINE</span></div>
     <div class="spec-row"><span class="spec-key">VAULT</span><span id="about-vault">VERGRENDELD</span></div>
     <div style="margin-top:14px;color:var(--amber-dim);font-size:0.75rem;">
       Zakelijk samenwerken? Neem contact op via Terminal: <span style="color:var(--amber)">contact</span>
     </div>
   </div>
   <div class="win-resize">â—¢</div>
 </div>

 <!-- WINDOW: SYSLOG -->

 <div class="win" id="win-syslog" style="top:120px;left:240px;width:440px;height:300px;">
   <div class="win-titlebar" data-win="win-syslog">
     <span>ğŸ“‹</span> SYSTEEM LOG
     <button class="win-close" onclick="closeWin('win-syslog')">âœ•</button>
   </div>
   <div class="win-body" id="syslog-body"></div>
   <div class="win-resize">â—¢</div>
 </div>

</div>

<!-- TASKBAR -->

<div id="taskbar">
 <button id="start-btn" onclick="toggleStart()">â–¶ START</button>
 <div id="taskbar-apps"></div>
 <div class="task-clock" id="clock"></div>
</div>

<!-- START MENU -->

<div id="start-menu">
 <div class="sm-header">DIRKX-OS</div>
 <ul>
   <li onclick="openWin('win-media')"><span class="ico">ğŸ“º</span> Free Media</li>
   <li onclick="openWin('win-books')"><span class="ico">ğŸ“š</span> Bibliotheek</li>
   <li onclick="openWin('win-vault')"><span class="ico">ğŸ”</span> Vault</li>
   <li onclick="openWin('win-term')"><span class="ico">âŒ¨ï¸</span> Terminal</li>
   <li onclick="openWin('win-about')"><span class="ico">âš™ï¸</span> Systeem Info</li>
   <li onclick="openWin('win-syslog')"><span class="ico">ğŸ“‹</span> Sys Log</li>
 </ul>
</div>

<script>
/* ===================== BOOT SEQUENCE ===================== */
const bootLines = [
 {t:"DIRKX BIOS v2.4 â€” Industrial Core Edition", delay:200},
 {t:"CPU: DIRKX-8086 @ 33MHz .............. OK", delay:500},
 {t:"RAM: 640K base + 8192K extended ....... OK", delay:700},
 {t:"Initiating storage controller ......... OK", delay:900},
 {t:"Loading vault kernel ...................", delay:1100},
 {t:"Vault kernel checksum: PASSED ......... OK", delay:1500},
 {t:"Mounting media filesystem ..............", delay:1700},
 {t:"Free media index: ONLINE .............. OK", delay:2000},
 {t:"Starting DIRKX-OS .......................", delay:2300, bright:true},
 {t:"Clearance level: STANDARD", delay:2600, bright:true},
];

const bootEl = document.getElementById('boot');
bootLines.forEach(({t, delay, bright}) => {
 setTimeout(() => {
   const line = document.createElement('div');
   line.className = 'boot-line' + (bright ? ' bright' : '');
   line.textContent = t;
   bootEl.appendChild(line);
 }, delay);
});
setTimeout(() => {
 bootEl.classList.add('hidden');
 addSyslog('INFO','Sistema gestart â€” clearance: STANDARD','ok');
 addSyslog('INFO','Free media index geladen','ok');
 addSyslog('WARN','Vault vergrendeld â€” authenticatie vereist','warn');
}, 3400);

/* ===================== CLOCK & UPTIME ===================== */
const startTime = Date.now();
function updateClock() {
 const now = new Date();
 document.getElementById('clock').textContent =
   now.toLocaleTimeString('nl-NL', {hour:'2-digit',minute:'2-digit',second:'2-digit'});
 const up = Math.floor((Date.now()-startTime)/1000);
 const h=String(Math.floor(up/3600)).padStart(2,'0');
 const m=String(Math.floor((up%3600)/60)).padStart(2,'0');
 const s=String(up%60).padStart(2,'0');
 const ut = document.getElementById('uptime');
 if(ut) ut.textContent = `${h}:${m}:${s}`;
}
setInterval(updateClock, 1000);
updateClock();

/* ===================== SYSLOG ===================== */
function addSyslog(level, msg, cls='') {
 const body = document.getElementById('syslog-body');
 const ts = new Date().toLocaleTimeString('nl-NL');
 const line = document.createElement('div');
 line.className = cls ? `slog-${cls}` : '';
 line.textContent = `[${ts}] [${level}] ${msg}`;
 body.appendChild(line);
 body.scrollTop = body.scrollHeight;
}

/* ===================== WINDOWS ===================== */
let zTop = 200;
const openWindows = {};

function openWin(id) {
 const w = document.getElementById(id);
 if (!w) return;
 w.classList.add('open');
 w.style.zIndex = ++zTop;
 openWindows[id] = true;
 updateTaskbar();
 addSyslog('INFO', `Venster geopend: ${id.replace('win-','')}`, '');
 makeDraggable(w);
 makeResizable(w);
}

function closeWin(id) {
 const w = document.getElementById(id);
 if (!w) return;
 w.classList.remove('open');
 delete openWindows[id];
 updateTaskbar();
}

function focusWin(id) {
 const w = document.getElementById(id);
 if (!w) return;
 w.style.zIndex = ++zTop;
}

function updateTaskbar() {
 const bar = document.getElementById('taskbar-apps');
 bar.innerHTML = '';
 Object.keys(openWindows).forEach(id => {
   const btn = document.createElement('div');
   btn.className = 'taskbar-app active';
   const labels = {
     'win-media':'ğŸ“º MEDIA','win-books':'ğŸ“š BOEKEN','win-vault':'ğŸ” VAULT',
     'win-term':'âŒ¨ï¸ TERM','win-about':'âš™ï¸ SYSTEEM','win-syslog':'ğŸ“‹ LOG'
   };
   btn.textContent = labels[id] || id;
   btn.onclick = () => focusWin(id);
   bar.appendChild(btn);
 });
}

/* ===================== DRAG ===================== */
function makeDraggable(win) {
 const bar = win.querySelector('.win-titlebar');
 if (bar._dragSet) return;
 bar._dragSet = true;
 let ox=0,oy=0,dragging=false;
 bar.addEventListener('mousedown', e => {
   if (e.target.closest('.win-close')) return;
   dragging = true;
   ox = e.clientX - win.offsetLeft;
   oy = e.clientY - win.offsetTop;
   win.style.zIndex = ++zTop;
   e.preventDefault();
 });
 document.addEventListener('mousemove', e => {
   if (!dragging) return;
   win.style.left = (e.clientX - ox) + 'px';
   win.style.top = Math.max(0, e.clientY - oy) + 'px';
 });
 document.addEventListener('mouseup', () => { dragging = false; });
}

/* ===================== RESIZE ===================== */
function makeResizable(win) {
 const handle = win.querySelector('.win-resize');
 if (!handle || handle._resizeSet) return;
 handle._resizeSet = true;
 let resizing=false, sx=0,sy=0,sw=0,sh=0;
 handle.addEventListener('mousedown', e => {
   resizing=true; sx=e.clientX; sy=e.clientY;
   sw=win.offsetWidth; sh=win.offsetHeight;
   e.preventDefault(); e.stopPropagation();
 });
 document.addEventListener('mousemove', e => {
   if (!resizing) return;
   win.style.width = Math.max(260, sw+(e.clientX-sx)) + 'px';
   win.style.height = Math.max(160, sh+(e.clientY-sy)) + 'px';
 });
 document.addEventListener('mouseup', () => { resizing=false; });
}

/* ===================== START MENU ===================== */
const startMenu = document.getElementById('start-menu');
function toggleStart() {
 startMenu.classList.toggle('open');
}
document.addEventListener('click', e => {
 if (!e.target.closest('#start-menu') && !e.target.closest('#start-btn')) {
   startMenu.classList.remove('open');
 }
});

/* ===================== VAULT / PIN ===================== */
let clearance = 0;
let pinEntry = [];
const PIN = [1,3,3,7];

// Build pin buttons
const pinBtns = document.getElementById('pin-buttons');
if (pinBtns) {
 for (let i=1; i<=9; i++) {
   const b = document.createElement('button');
   b.className='pin-btn'; b.textContent=i;
   b.onclick=()=>enterPin(i);
   pinBtns.appendChild(b);
 }
 const b0 = document.createElement('button');
 b0.className='pin-btn'; b0.textContent='0';
 b0.onclick=()=>enterPin(0);
 pinBtns.appendChild(b0);
 const bc = document.createElement('button');
 bc.className='pin-btn'; bc.textContent='C';
 bc.onclick=()=>{ pinEntry=[]; updatePinDisplay(); };
 pinBtns.appendChild(bc);
}

function updatePinDisplay() {
 const d = document.getElementById('pin-display');
 if (!d) return;
 let str = '';
 for (let i=0;i<4;i++) str += (i < pinEntry.length ? 'â—' : '_') + ' ';
 d.textContent = str.trim();
}

function enterPin(n) {
 if (pinEntry.length >= 4) return;
 pinEntry.push(n);
 updatePinDisplay();
 if (pinEntry.length === 4) {
   if (JSON.stringify(pinEntry) === JSON.stringify(PIN)) {
     unlockVault();
   } else {
     setTimeout(()=>{ pinEntry=[]; updatePinDisplay(); addSyslog('ERR','PIN incorrect','err'); }, 600);
   }
 }
}

function unlockVault(godmode=false) {
 clearance = godmode ? 2 : 1;
 document.getElementById('vault-locked').style.display='none';
 document.getElementById('vault-unlocked').style.display='block';
 document.getElementById('vault-status').textContent = godmode ? 'GODMODE' : 'VRIJGEGEVEN';
 document.getElementById('about-clearance').textContent = godmode ? 'GODMODE' : 'VAULT';
 document.getElementById('about-vault').textContent = 'VRIJGEGEVEN';
 achievement(godmode ? 'ğŸ”“ GODMODE GEACTIVEERD' : 'ğŸ”“ Vault vrijgegeven â€” clearance: VAULT');
 addSyslog('OK','Vault ontgrendeld â€” clearance verhoogd','ok');
}

/* ===================== TERMINAL ===================== */
const termOut = document.getElementById('term-output');
const termIn = document.getElementById('term-input');
const help = `Beschikbare commando's:
 help        â€” dit scherm
 unlock      â€” vault vrijgeven
 media       â€” open media venster
 boeken      â€” open bibliotheek
 vault       â€” open vault
 clearance   â€” toon clearance niveau
 contact     â€” contactinfo
 sysinfo     â€” systeem informatie
 easter      â€” ?
 clear       â€” wis terminal`;

function tlog(msg, cls='') {
 const d = document.createElement('div');
 d.className = 'term-line' + (cls ? ' '+cls : '');
 d.innerHTML = msg;
 termOut.appendChild(d);
 termOut.scrollTop = termOut.scrollHeight;
}

if (termIn) {
 termIn.addEventListener('keydown', e => {
   if (e.key !== 'Enter') return;
   const cmd = termIn.value.trim().toLowerCase();
   termIn.value = '';
   tlog('$ ' + cmd, 'cmd');
   addSyslog('CMD', cmd);
   switch(cmd) {
     case 'help': tlog(help.replace(/\n/g,'<br>')); break;
     case 'unlock':
       unlockVault();
       openWin('win-vault');
       tlog('Vault vrijgegeven.','ok');
       break;
     case 'media': openWin('win-media'); tlog('Media venster geopend.','ok'); break;
     case 'boeken': openWin('win-books'); tlog('Bibliotheek geopend.','ok'); break;
     case 'vault': openWin('win-vault'); tlog('Vault geopend.','ok'); break;
     case 'clearance': tlog(`Huidig niveau: ${clearance===0?'STANDARD':clearance===1?'VAULT':'GODMODE'}`); break;
     case 'contact': tlog('Email: info@dirkxtechniek.nl<br>Zakelijk samenwerken: stuur een bericht.'); break;
     case 'sysinfo': openWin('win-about'); tlog('Systeem info geopend.','ok'); break;
     case 'clear': termOut.innerHTML=''; break;
     case 'easter':
       unlockVault(true);
       achievement('ğŸ¥š Easter egg gevonden!');
       tlog('GODMODE geactiveerd.','ok');
       break;
     case 'dirkx':
       achievement('âš™ï¸ Metal Â· Systems Â· Economy');
       tlog('Systeem: DIRKX TECHNIEK â€” industriÃ«le kern actief.','ok');
       break;
     default:
       tlog(`Onbekend commando: "${cmd}" â€” type help`,'err');
   }
 });
}

/* ===================== ACHIEVEMENT ===================== */
let achTimer;
function achievement(msg) {
 const el = document.getElementById('achievement');
 el.textContent = msg;
 el.style.display = 'block';
 clearTimeout(achTimer);
 achTimer = setTimeout(() => el.style.display='none', 3500);
}

/* ===================== KONAMI ===================== */
let kseq = [];
const KONAMI = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
document.addEventListener('keydown', e => {
 kseq.push(e.key);
 if (kseq.length > KONAMI.length) kseq.shift();
 if (JSON.stringify(kseq) === JSON.stringify(KONAMI)) {
   unlockVault(true);
   document.getElementById('konami-bar').classList.add('active');
   openWin('win-vault');
   addSyslog('WARN','Konami code gedetecteerd â€” GODMODE','warn');
 }
});

/* ===================== RANDOM SYSLOG EVENTS ===================== */
const events = [
 ['INFO','Media index sync voltooid','ok'],
 ['INFO','Vault integriteitscontrole: PASSED','ok'],
 ['WARN','Ongewone activiteit gedetecteerd op poort 1337','warn'],
 ['INFO','CRT kalibratie uitgevoerd',''],
 ['INFO','Geheugentest: 640K vrij',''],
 ['WARN','Onbekende verbindingspoging geblokkeerd','warn'],
];
setInterval(() => {
 const [l,m,c] = events[Math.floor(Math.random()*events.length)];
 addSyslog(l,m,c);
}, 8000);
</script>

</body>
</html>
