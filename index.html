<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DIRKX-OS</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=VT323&display=swap');

:root {
--amber: #ffb000;
--amber-dim: #7a5200;
--amber-bright: #ffd060;
--amber-glow: rgba(255,176,0,0.15);
--bg: #0a0800;
--bg2: #110e00;
--scanline: rgba(0,0,0,0.35);
--border: #3a2a00;
--green: #88cc00;
--red: #cc4400;
}

* { margin:0; padding:0; box-sizing:border-box; }

html {
background-color: #0a0800 !important;
}

body {
background: var(--bg);
background-color: #0a0800;
color: var(--amber);
font-family: 'Share Tech Mono', monospace;
min-height: 100vh;
height: 100%;
overflow: hidden;
cursor: default;
user-select: none;
-webkit-overflow-scrolling: touch;
}

/* CRT effect */
body::before {
content:'';
position:fixed;
inset:0;
background: repeating-linear-gradient(
0deg,
var(--scanline) 0px,
var(--scanline) 1px,
transparent 1px,
transparent 3px
);
pointer-events:none;
z-index:9999;
animation: scanmove 8s linear infinite;
}
body::after {
content:'';
position:fixed;
inset:0;
background: radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.7) 100%);
pointer-events:none;
z-index:9998;
}
@keyframes scanmove {
from { background-position: 0 0; }
to { background-position: 0 100px; }
}

/* BOOT SCREEN */
#boot {
position:fixed;
inset:0;
background:#0a0800 !important;
background-color:#0a0800 !important;
z-index:5000;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
gap:6px;
}
#boot.hidden { display:none; }
.boot-line {
font-family:'VT323',monospace;
font-size:1.2rem;
color: #cc8800;
opacity:0;
animation: fadein 0.3s forwards;
}
.boot-line.bright { color: #ffcc00; font-weight:bold; }
@keyframes fadein { to { opacity:1; } }

/* TASKBAR */
#taskbar {
position:fixed;
bottom:0; left:0; right:0;
height:36px;
background:#0a0800;
border-top:1px solid var(--amber-dim);
display:flex;
align-items:center;
padding:0 12px;
gap:10px;
z-index:1000;
}
#start-btn {
background: var(--amber);
color: #0a0800;
font-family:'VT323',monospace;
font-size:1.1rem;
padding:2px 12px;
cursor:pointer;
border:none;
letter-spacing:2px;
}
#start-btn:hover { background: var(--amber-bright); }

.task-clock {
margin-left:auto;
font-size:0.85rem;
color:var(--amber-dim);
letter-spacing:1px;
}

.taskbar-app {
font-size:0.8rem;
color:var(--amber-dim);
border:1px solid var(--amber-dim);
padding:1px 8px;
cursor:pointer;
white-space:nowrap;
}
.taskbar-app:hover, .taskbar-app.active { color:var(--amber); border-color:var(--amber); }

/* START MENU */
#start-menu {
position: fixed !important;
bottom: 36px;
left: 0;
width: 220px;
max-height: calc(100vh - 80px);
overflow-y: auto;
background: rgba(15,10,0,0.97);
border: 1px solid var(--amber);
border-bottom: none;
z-index: 9999 !important;
display: none;
-webkit-overflow-scrolling: touch;
}
#start-menu.open { display:block; }
#start-menu .sm-header {
background:var(--amber);
color:#0a0800;
font-family:'VT323',monospace;
font-size:1.4rem;
padding:6px 12px;
letter-spacing:3px;
}
#start-menu ul { list-style:none; }
#start-menu ul li {
padding:10px 16px;
cursor:pointer;
border-bottom:1px solid var(--amber-dim);
font-size:0.88rem;
display:flex;
align-items:center;
gap:10px;
color: var(--amber-bright);
letter-spacing: 0.5px;
}
#start-menu ul li:hover { background:var(--amber-glow); color:var(--amber-bright); }
#start-menu ul li .ico { width:18px; text-align:center; }

/* DESKTOP */
#desktop {
position:fixed;
inset:0;
bottom:36px;
overflow:hidden;
background-color: #0a0800;
background-image:
radial-gradient(ellipse 80% 70% at 50% 40%, rgba(60,40,0,0.55) 0%, transparent 70%),
radial-gradient(ellipse 120% 100% at 50% 50%, rgba(30,20,0,0.8) 40%, rgba(0,0,0,0.95) 100%);
}

/* DESKTOP ICONS */
.desk-icon {
position:absolute;
display:flex;
flex-direction:column;
align-items:center;
gap:4px;
width:72px;
padding:6px;
cursor:pointer;
}

.icon-label {
color: #ffd700 !important;
font-size: 0.68rem;
text-align: center;
text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
font-weight: bold;
line-height: 1.25;
margin-top: 2px;
display: block !important;
visibility: visible !important;
opacity: 1 !important;
}
.desk-icon:hover .icon-label { color: #fff0aa !important; }
.icon-box {
width:52px;
height:52px;
border:2px solid var(--amber);
background: rgba(255,140,0,0.08);
display:flex;
align-items:center;
justify-content:center;
font-size:2rem;
border-radius:6px;
transition:all 0.15s;
box-shadow: inset 0 0 8px rgba(255,140,0,0.1);
}
.desk-icon:hover .icon-box {
background: rgba(255,140,0,0.2);
border-color: var(--amber-bright);
box-shadow: 0 0 12px var(--amber-glow), inset 0 0 8px rgba(255,140,0,0.15);
}

/* WINDOWS */
.win {
position:absolute;
min-width:280px;
max-width:calc(100vw - 20px);
min-height:180px;
background:#0a0800;
border:1px solid var(--amber-dim);
box-shadow:0 0 30px rgba(255,176,0,0.12);
display:none;
flex-direction:column;
z-index:100;
}
.win.open { display:flex; }
.win-titlebar {
background:var(--amber-dim);
padding:4px 8px;
display:flex;
align-items:center;
gap:8px;
cursor:grab;
font-family:'VT323',monospace;
font-size:1.1rem;
color: var(--amber-bright);
letter-spacing:1px;
}
.win-titlebar:active { cursor:grabbing; }
.win-close {
margin-left:auto;
cursor:pointer;
background:none;
border:1px solid var(--amber);
color:var(--amber);
font-family:'VT323',monospace;
font-size:1rem;
width:20px;
height:20px;
display:flex;
align-items:center;
justify-content:center;
line-height:1;
}
.win-close:hover { background:var(--amber); color:#0a0800; }
.win-body {
padding:14px;
flex:1;
overflow-y:auto;
font-size:0.82rem;
line-height:1.8;
}
.win-body::-webkit-scrollbar { width:6px; }
.win-body::-webkit-scrollbar-track { background:#0a0800; }
.win-body::-webkit-scrollbar-thumb { background:var(--amber-dim); }

/* Link list */
.link-list { list-style:none; }
.link-list li {
border-bottom:1px solid #1a1400;
padding:8px 0;
display:flex;
align-items:center;
gap:8px;
}
.link-list li::before { content:'‚ñ∂'; color:var(--amber-dim); font-size:0.7rem; }
.link-list a {
color:var(--amber);
text-decoration:none;
letter-spacing:0.5px;
}
.link-list a:hover { color:var(--amber-bright); text-decoration:underline; }
.link-tag {
margin-left:auto;
font-size:0.68rem;
color:var(--amber-dim);
border:1px solid var(--amber-dim);
padding:1px 5px;
}

/* TERMINAL WINDOW */
#term-output {
min-height:160px;
max-height:260px;
overflow-y:auto;
margin-bottom:8px;
font-size:0.8rem;
line-height:1.6;
}
#term-output::-webkit-scrollbar { width:4px; }
#term-output::-webkit-scrollbar-thumb { background:var(--amber-dim); }
.term-line { color:var(--amber-dim); }
.term-line.cmd { color:var(--amber); }
.term-line.err { color:#cc4400; }
.term-line.ok { color:#88cc00; }
.term-input-row {
display:flex;
align-items:center;
gap:6px;
border-top:1px solid var(--border);
padding-top:8px;
}
.term-prompt { color:var(--amber-dim); }
#term-input {
background:none;
border:none;
outline:none;
color:var(--amber);
font-family:'Share Tech Mono',monospace;
font-size:0.82rem;
flex:1;
caret-color:var(--amber);
}

/* SYSLOG */
#syslog-body {
font-size:0.75rem;
line-height:1.7;
color:var(--amber-dim);
}
.slog-ok { color:#88cc00; }
.slog-warn { color:#cc8800; }
.slog-err { color:#cc4400; }

/* ABOUT - FIXED ASCII */
.about-ascii {
font-family:'Share Tech Mono',monospace;
font-size:0.7rem;
color:var(--amber-dim);
line-height:1.2;
margin-bottom:16px;
white-space:pre;
overflow-x:auto;
}

.spec-row { display:flex; gap:8px; color:var(--amber-dim); }
.spec-key { min-width:100px; color:var(--amber); }

/* VAULT locked */
.locked-msg {
text-align:center;
padding:30px 10px;
color:var(--amber-dim);
font-family:'VT323',monospace;
font-size:1.4rem;
}
.locked-msg .lock-ico { font-size:3rem; margin-bottom:10px; }
.pin-row { display:flex; gap:8px; margin-top:16px; justify-content:center; }
.pin-btn {
background:none;
border:1px solid var(--amber-dim);
color:var(--amber-dim);
font-family:'VT323',monospace;
font-size:1.2rem;
width:36px;
height:36px;
cursor:pointer;
}
.pin-btn:hover { border-color:var(--amber); color:var(--amber); }
#pin-display {
font-family:'VT323',monospace;
font-size:1.5rem;
letter-spacing:8px;
text-align:center;
margin-top:10px;
color:var(--amber);
min-height:30px;
}

/* Status bar in window */
.win-status {
border-top:1px solid var(--border);
padding:3px 10px;
font-size:0.7rem;
color:var(--amber-dim);
display:flex;
gap:16px;
}

/* Achievement */
#achievement {
position:fixed;
top:16px;
right:16px;
background:#0a0800;
border:1px solid var(--amber);
padding:10px 16px;
font-family:'VT323',monospace;
font-size:1.1rem;
color:var(--amber);
z-index:9000;
display:none;
animation:slidein 0.3s ease;
max-width:280px;
}
@keyframes slidein {
from { transform:translateX(120%); opacity:0; }
to { transform:translateX(0); opacity:1; }
}

/* Blink cursor */
@keyframes blink { 50%{opacity:0} }
.blink { animation:blink 1s step-start infinite; }

/* Resize handle */
.win-resize {
position:absolute;
bottom:0; right:0;
width:14px; height:14px;
cursor:se-resize;
color:var(--amber-dim);
font-size:0.8rem;
display:flex;
align-items:flex-end;
justify-content:flex-end;
padding:2px;
}

/* KONAMI hint */
#konami-bar {
position:fixed;
top:0; left:0; right:0;
height:2px;
background:transparent;
z-index:8000;
transition:background 0.5s;
}
#konami-bar.active { background:linear-gradient(90deg, var(--amber), var(--amber-bright), var(--amber)); }

#wm {
position: absolute;
width: min(340px, 70vw);
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
opacity: 0.12;
pointer-events: none;
z-index: 0;
filter: sepia(1) saturate(3) hue-rotate(5deg) brightness(0.9);
-webkit-filter: sepia(1) saturate(3) hue-rotate(5deg) brightness(0.9);
}

/* SECURE NOTES STYLES */
.notes-list {
max-height:150px;
overflow-y:auto;
border:1px solid var(--border);
margin-bottom:10px;
}
.note-item {
padding:8px;
border-bottom:1px solid #1a1400;
cursor:pointer;
display:flex;
justify-content:space-between;
align-items:center;
}
.note-item:hover { background:var(--amber-glow); }
.note-item.selected { background:rgba(255,176,0,0.2); }
.note-title { font-size:0.8rem; }
.note-date { font-size:0.65rem; color:var(--amber-dim); }
.note-editor {
width:100%;
min-height:120px;
background:#050505;
border:1px solid var(--border);
color:var(--amber);
font-family:inherit;
font-size:0.8rem;
padding:8px;
resize:vertical;
}
.note-btn {
background:none;
border:1px solid var(--amber-dim);
color:var(--amber);
padding:6px 16px;
cursor:pointer;
font-family:inherit;
font-size:0.75rem;
margin-right:8px;
}
.note-btn:hover { background:var(--amber-glow); border-color:var(--amber); }
.note-status {
font-size:0.7rem;
color:var(--amber-dim);
margin-top:8px;
}

/* PROXY GATEWAY STYLES */
.proxy-input {
display:flex;
gap:8px;
margin-bottom:12px;
}
.proxy-input input {
flex:1;
background:#050505;
border:1px solid var(--border);
color:var(--amber);
font-family:inherit;
padding:8px;
font-size:0.85rem;
}
.proxy-btn {
background:var(--amber);
color:#0a0800;
border:none;
padding:8px 16px;
cursor:pointer;
font-family:'VT323',monospace;
font-size:1rem;
}
.proxy-btn:hover { background:var(--amber-bright); }
.proxy-options {
display:grid;
grid-template-columns:1fr 1fr;
gap:8px;
margin-bottom:12px;
}
.proxy-option {
border:1px solid var(--border);
padding:8px;
cursor:pointer;
font-size:0.75rem;
}
.proxy-option:hover { background:var(--amber-glow); }
.proxy-option.selected {
border-color:var(--amber);
background:rgba(255,176,0,0.1);
}
.proxy-option .opt-name { color:var(--amber-bright); font-weight:bold; }
.proxy-option .opt-desc { color:var(--amber-dim); font-size:0.7rem; margin-top:4px; }
.proxy-history {
margin-top:12px;
border-top:1px solid var(--border);
padding-top:8px;
}
.proxy-history-title {
font-size:0.75rem;
color:var(--amber-dim);
margin-bottom:8px;
}
.history-item {
font-size:0.7rem;
padding:4px 0;
cursor:pointer;
color:var(--amber);
}
.history-item:hover { color:var(--amber-bright); text-decoration:underline; }

/* QR GENERATOR STYLES */
.qr-input {
width:100%;
background:#050505;
border:1px solid var(--border);
color:var(--amber);
font-family:inherit;
padding:8px;
font-size:0.85rem;
margin-bottom:10px;
}
.qr-display {
width:200px;
height:200px;
margin:0 auto;
background:#fff;
display:flex;
align-items:center;
justify-content:center;
border:4px solid var(--amber);
}
.qr-display canvas, .qr-display img {
max-width:100%;
max-height:100%;
}
.qr-btn {
display:block;
margin:10px auto;
background:var(--amber);
color:#0a0800;
border:none;
padding:8px 24px;
cursor:pointer;
font-family:'VT323',monospace;
font-size:1rem;
}
.qr-btn:hover { background:var(--amber-bright); }

/* FILE SCANNER STYLES */
.drop-zone {
border:2px dashed var(--amber-dim);
padding:40px 20px;
text-align:center;
margin-bottom:12px;
transition:all 0.3s;
}
.drop-zone.dragover {
border-color:var(--amber);
background:var(--amber-glow);
}
.drop-zone-text {
font-size:0.9rem;
color:var(--amber-dim);
}
.drop-zone-text strong { color:var(--amber); }
.file-info {
border:1px solid var(--border);
padding:12px;
font-size:0.75rem;
display:none;
}
.file-info.show { display:block; }
.file-row {
display:flex;
justify-content:space-between;
padding:4px 0;
border-bottom:1px solid #1a1400;
}
.file-row:last-child { border-bottom:none; }
.file-label { color:var(--amber-dim); }
.file-value { color:var(--amber); font-family:'VT323',monospace; }
.file-hex {
margin-top:10px;
padding:8px;
background:#050505;
border:1px solid var(--border);
font-size:0.65rem;
color:var(--amber-dim);
font-family:'Share Tech Mono',monospace;
max-height:80px;
overflow-y:auto;
word-break:break-all;
}
.file-scan-btn {
width:100%;
margin-top:10px;
background:none;
border:1px solid var(--amber-dim);
color:var(--amber);
padding:8px;
cursor:pointer;
font-family:inherit;
}
.file-scan-btn:hover { background:var(--amber-glow); border-color:var(--amber); }
.scan-progress {
width:100%;
height:4px;
background:#1a1400;
margin-top:8px;
display:none;
}
.scan-progress.show { display:block; }
.scan-progress-fill {
height:100%;
width:0%;
background:var(--green);
transition:width 0.3s;
}

/* WEATHER STYLES */
.weather-display {
text-align:center;
padding:20px;
}
.weather-temp {
font-size:3rem;
font-family:'VT323',monospace;
color:var(--amber-bright);
}
.weather-desc {
font-size:1rem;
color:var(--amber);
margin-top:8px;
}
.weather-location {
font-size:0.8rem;
color:var(--amber-dim);
margin-top:4px;
}
.weather-details {
display:grid;
grid-template-columns:1fr 1fr;
gap:12px;
margin-top:20px;
}
.weather-detail {
border:1px solid var(--border);
padding:8px;
}
.weather-detail-label {
font-size:0.7rem;
color:var(--amber-dim);
}
.weather-detail-value {
font-size:1.1rem;
color:var(--amber);
font-family:'VT323',monospace;
}
.weather-input {
display:flex;
gap:8px;
margin-top:16px;
}
.weather-input input {
flex:1;
background:#050505;
border:1px solid var(--border);
color:var(--amber);
font-family:inherit;
padding:8px;
}
.weather-input button {
background:var(--amber);
color:#0a0800;
border:none;
padding:8px 16px;
cursor:pointer;
font-family:'VT323',monospace;
}
</style>

</head>
<body>

<!-- BOOT -->

<div id="boot"></div>

<!-- ACHIEVEMENT -->

<div id="achievement"></div>
<div id="konami-bar"></div>

<!-- DESKTOP -->

<div id="desktop">
 <img id="wm" src="logo.png" alt="DIRKX" onerror="this.style.display='none'" />

 <!-- Icons -->

 <div class="desk-icon" style="top:16px;left:16px" onclick="openWin('win-media')">
   <div class="icon-box">üì∫</div>
   <div class="icon-label">FREE MEDIA</div>
 </div>
 <div class="desk-icon" style="top:108px;left:16px" onclick="openWin('win-books')">
   <div class="icon-box">üìö</div>
   <div class="icon-label">BIBLIOTHEEK</div>
 </div>
 <div class="desk-icon" style="top:200px;left:16px" onclick="openWin('win-vault')">
   <div class="icon-box">üîê</div>
   <div class="icon-label">VAULT</div>
 </div>
 <div class="desk-icon" style="top:292px;left:16px" onclick="openWin('win-term')">
   <div class="icon-box">‚å®Ô∏è</div>
   <div class="icon-label">TERMINAL</div>
 </div>
 <div class="desk-icon" style="top:16px;left:100px" onclick="openWin('win-about')">
   <div class="icon-box">‚öôÔ∏è</div>
   <div class="icon-label">SYSTEEM INFO</div>
 </div>
 <div class="desk-icon" style="top:108px;left:100px" onclick="openWin('win-syslog')">
   <div class="icon-box">üìã</div>
   <div class="icon-label">SYS LOG</div>
 </div>
 <div class="desk-icon" style="top:200px;left:100px" onclick="openWin('win-notes')">
   <div class="icon-box">üìù</div>
   <div class="icon-label">NOTITIES</div>
 </div>
 <div class="desk-icon" style="top:292px;left:100px" onclick="openWin('win-proxy')">
   <div class="icon-box">üõ°Ô∏è</div>
   <div class="icon-label">PROXY</div>
 </div>
 <div class="desk-icon" style="top:16px;left:184px" onclick="openWin('win-qr')">
   <div class="icon-box">‚ñ£</div>
   <div class="icon-label">QR GEN</div>
 </div>
 <div class="desk-icon" style="top:108px;left:184px" onclick="openWin('win-file')">
   <div class="icon-box">üìÅ</div>
   <div class="icon-label">FILE SCAN</div>
 </div>
 <div class="desk-icon" style="top:200px;left:184px" onclick="openWin('win-weather')">
   <div class="icon-box">üå§Ô∏è</div>
   <div class="icon-label">WEER</div>
 </div>

 <!-- WINDOW: FREE MEDIA -->

 <div class="win" id="win-media" style="top:60px;left:200px;width:420px;">
   <div class="win-titlebar" data-win="win-media">
     <span>üì∫</span> FREE MEDIA ‚Äî DIRKX-OS
     <button class="win-close" onclick="closeWin('win-media')">‚úï</button>
   </div>
   <div class="win-body">
     <ul class="link-list">
       <li>
         <a href="https://1movies.bz/home " target="_blank">1Movies</a>
         <span class="link-tag">FILMS/SERIES</span>
       </li>
       <li>
         <a href="https://fmhy.net " target="_blank">FMHY ‚Äî Free Media Heck Yeah</a>
         <span class="link-tag">DIRECTORY</span>
       </li>
       <li>
         <a href="https://rentry.co/megathread " target="_blank">MEGATHREAD</a>
         <span class="link-tag">GEAVANCEERD</span>
       </li>
     </ul>
   </div>
   <div class="win-status"><span>STATUS: ONLINE</span><span>ENCRYPTIE: GEEN</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: BOEKEN -->

 <div class="win" id="win-books" style="top:100px;left:260px;width:380px;">
   <div class="win-titlebar" data-win="win-books">
     <span>üìö</span> BIBLIOTHEEK
     <button class="win-close" onclick="closeWin('win-books')">‚úï</button>
   </div>
   <div class="win-body">
     <ul class="link-list">
       <li>
         <a href="https://annas-archive.li " target="_blank">Anna's Archive</a>
         <span class="link-tag">BOEKEN/PDF</span>
       </li>
     </ul>
     <p style="margin-top:16px;color:var(--amber-dim);font-size:0.78rem;">
       Toegang tot miljoenen titels. Gebruik verantwoord.
     </p>
   </div>
   <div class="win-status"><span>RECORDS: ‚àû</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: VAULT (PIN) -->

 <div class="win" id="win-vault" style="top:80px;left:300px;width:360px;">
   <div class="win-titlebar" data-win="win-vault">
     <span>üîê</span> VAULT ‚Äî TOEGANGSCONTROLE
     <button class="win-close" onclick="closeWin('win-vault')">‚úï</button>
   </div>
   <div class="win-body" id="vault-body">
     <div class="locked-msg" id="vault-locked">
       <div class="lock-ico">üîí</div>
       <div>CLEARANCE VEREIST</div>
       <div style="font-size:0.9rem;margin-top:6px;color:var(--amber-dim)">Voer PIN in: gebruik terminal of knop hieronder</div>
       <div id="pin-display">_ _ _ _</div>
       <div class="pin-row" id="pin-buttons"></div>
       <div style="margin-top:8px;font-size:0.8rem;color:var(--amber-dim)">Of type <span style="color:var(--amber)">unlock</span> in Terminal</div>
     </div>
     <div id="vault-unlocked" style="display:none">
       <ul class="link-list">
         <li><a href="https://fmhy.net " target="_blank">FMHY.NET</a><span class="link-tag">CORE</span></li>
         <li><a href="https://rentry.co/megathread " target="_blank">MEGATHREAD</a><span class="link-tag">INDUSTRIAL</span></li>
       </ul>
       <p style="margin-top:12px;color:var(--amber-dim);font-size:0.75rem;">‚ö† CLEARANCE: INDUSTRIAL CORE ‚Äî Gebruik met discretie</p>
     </div>
   </div>
   <div class="win-status"><span id="vault-status">VERGRENDELD</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: TERMINAL -->

 <div class="win" id="win-term" style="top:140px;left:180px;width:480px;">
   <div class="win-titlebar" data-win="win-term">
     <span>‚å®Ô∏è</span> DIRKX TERMINAL v2.4
     <button class="win-close" onclick="closeWin('win-term')">‚úï</button>
   </div>
   <div class="win-body">
     <div id="term-output">
       <div class="term-line">DIRKX-OS Terminal v2.4 ‚Äî type <span style="color:var(--amber)">help</span> voor commando's</div>
     </div>
     <div class="term-input-row">
       <span class="term-prompt">DIRKX:~$</span>
       <input type="text" id="term-input" autocomplete="off" spellcheck="false" />
       <span class="blink">‚ñà</span>
     </div>
   </div>
   <div class="win-status"><span>SHELL: DIRKX-SH</span><span>SESSION: ACTIVE</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: ABOUT -->

 <div class="win" id="win-about" style="top:50px;left:220px;width:400px;">
   <div class="win-titlebar" data-win="win-about">
     <span>‚öôÔ∏è</span> SYSTEEM INFO
     <button class="win-close" onclick="closeWin('win-about')">‚úï</button>
   </div>
   <div class="win-body">
     <pre class="about-ascii">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïó
‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïù
‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù  ‚ïö‚ñà‚ñà‚ñà‚ïî‚ïù 
‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó 
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïù ‚ñà‚ñà‚ïó
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù</pre>
     <div class="spec-row"><span class="spec-key">OS</span><span>DIRKX-OS v2.4</span></div>
     <div class="spec-row"><span class="spec-key">KERN</span><span>Metal ¬∑ Systems ¬∑ Economy</span></div>
     <div class="spec-row"><span class="spec-key">CLEARANCE</span><span id="about-clearance">STANDARD</span></div>
     <div class="spec-row"><span class="spec-key">UPTIME</span><span id="uptime">00:00:00</span></div>
     <div class="spec-row"><span class="spec-key">MEDIA DB</span><span>ONLINE</span></div>
     <div class="spec-row"><span class="spec-key">VAULT</span><span id="about-vault">VERGRENDELD</span></div>
     <div style="margin-top:14px;color:var(--amber-dim);font-size:0.75rem;">
       Zakelijk samenwerken? Neem contact op via Terminal: <span style="color:var(--amber)">contact</span>
     </div>
   </div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: SYSLOG -->

 <div class="win" id="win-syslog" style="top:120px;left:240px;width:440px;height:300px;">
   <div class="win-titlebar" data-win="win-syslog">
     <span>üìã</span> SYSTEEM LOG
     <button class="win-close" onclick="closeWin('win-syslog')">‚úï</button>
   </div>
   <div class="win-body" id="syslog-body"></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: SECURE NOTES -->

 <div class="win" id="win-notes" style="top:100px;left:200px;width:420px;">
   <div class="win-titlebar" data-win="win-notes">
     <span>üìù</span> VEILIGE NOTITIES
     <button class="win-close" onclick="closeWin('win-notes')">‚úï</button>
   </div>
   <div class="win-body">
     <div class="notes-list" id="notes-list"></div>
     <textarea class="note-editor" id="note-editor" placeholder="Selecteer een notitie of maak nieuwe..."></textarea>
     <div style="margin-top:10px;">
       <button class="note-btn" onclick="newNote()">NIEUW</button>
       <button class="note-btn" onclick="saveNote()">OPSLAAN</button>
       <button class="note-btn" onclick="deleteNote()" style="color:var(--red);">VERWIJDER</button>
     </div>
     <div class="note-status" id="note-status">Klaar</div>
   </div>
   <div class="win-status"><span id="note-count">0 notities</span><span>Encryptie: PIN-based</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: PROXY GATEWAY -->

 <div class="win" id="win-proxy" style="top:80px;left:180px;width:460px;">
   <div class="win-titlebar" data-win="win-proxy">
     <span>üõ°Ô∏è</span> PROXY GATEWAY
     <button class="win-close" onclick="closeWin('win-proxy')">‚úï</button>
   </div>
   <div class="win-body">
     <div class="proxy-input">
       <input type="text" id="proxy-url" placeholder="Voer URL in (bijv: https://example.com/article)" />
       <button class="proxy-btn" onclick="openProxy()">OPEN</button>
     </div>
     <div class="proxy-options">
       <div class="proxy-option selected" data-service="12ft">
         <div class="opt-name">12ft Ladder</div>
         <div class="opt-desc">Bypass paywalls - 12ft.io</div>
       </div>
       <div class="proxy-option" data-service="archive">
         <div class="opt-name">Wayback</div>
         <div class="opt-desc">Archive.org snapshot</div>
       </div>
       <div class="proxy-option" data-service="textise">
         <div class="opt-name">Textise</div>
         <div class="opt-desc">Text-only mode</div>
       </div>
       <div class="proxy-option" data-service="google">
         <div class="opt-name">Cache</div>
         <div class="opt-desc">Google cache</div>
       </div>
     </div>
     <div class="proxy-history">
       <div class="proxy-history-title">RECENTE DOORVERWIJZINGEN:</div>
       <div id="proxy-history"></div>
     </div>
   </div>
   <div class="win-status"><span>Privacy modus: ACTIEF</span><span>Geen logs</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: QR GENERATOR -->

 <div class="win" id="win-qr" style="top:120px;left:250px;width:340px;">
   <div class="win-titlebar" data-win="win-qr">
     <span>‚ñ£</span> QR CODE GENERATOR
     <button class="win-close" onclick="closeWin('win-qr')">‚úï</button>
   </div>
   <div class="win-body">
     <input type="text" class="qr-input" id="qr-text" placeholder="Tekst, URL, of data..." maxlength="500" />
     <div class="qr-display" id="qr-display">
       <span style="color:#999;font-size:0.8rem;">QR verschijnt hier</span>
     </div>
     <button class="qr-btn" onclick="generateQR()">GENEREREN</button>
     <button class="qr-btn" onclick="downloadQR()" style="display:none;" id="qr-download">DOWNLOAD PNG</button>
     <div style="font-size:0.7rem;color:var(--amber-dim);margin-top:10px;text-align:center;">
       Max 500 karakters ‚Ä¢ Lokale verwerking
     </div>
   </div>
   <div class="win-status"><span>Offline capable</span><span>No external API</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: FILE SCANNER -->

 <div class="win" id="win-file" style="top:60px;left:200px;width:440px;">
   <div class="win-titlebar" data-win="win-file">
     <span>üìÅ</span> FILE SCANNER & ANALYSE
     <button class="win-close" onclick="closeWin('win-file')">‚úï</button>
   </div>
   <div class="win-body">
     <div class="drop-zone" id="drop-zone">
       <div class="drop-zone-text">
         <strong>SLEEP BESTANDEN HIERHEEN</strong><br>
         of klik om te bladeren
       </div>
       <input type="file" id="file-input" style="display:none;" />
     </div>
     <div class="file-info" id="file-info">
       <div class="file-row">
         <span class="file-label">Bestandsnaam:</span>
         <span class="file-value" id="file-name">-</span>
       </div>
       <div class="file-row">
         <span class="file-label">Grootte:</span>
         <span class="file-value" id="file-size">-</span>
       </div>
       <div class="file-row">
         <span class="file-label">Type:</span>
         <span class="file-value" id="file-type">-</span>
       </div>
       <div class="file-row">
         <span class="file-label">Laatst gewijzigd:</span>
         <span class="file-value" id="file-date">-</span>
       </div>
       <div class="file-row">
         <span class="file-label">Hash (SHA-256):</span>
         <span class="file-value" id="file-hash" style="font-size:0.6rem;">-</span>
       </div>
       <div class="file-hex" id="file-hex">Hex preview...</div>
       <button class="file-scan-btn" onclick="scanFile()">üîç VIRUS SCAN SIMULATIE</button>
       <div class="scan-progress" id="scan-progress">
         <div class="scan-progress-fill" id="scan-fill"></div>
       </div>
       <div id="scan-result" style="margin-top:8px;font-size:0.75rem;"></div>
     </div>
   </div>
   <div class="win-status"><span>Lokaal verwerkt</span><span>Geen upload</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

 <!-- WINDOW: WEATHER -->

 <div class="win" id="win-weather" style="top:80px;left:220px;width:320px;">
   <div class="win-titlebar" data-win="win-weather">
     <span>üå§Ô∏è</span> WEERSTATION
     <button class="win-close" onclick="closeWin('win-weather')">‚úï</button>
   </div>
   <div class="win-body">
     <div class="weather-display" id="weather-display">
       <div class="weather-temp">--¬∞</div>
       <div class="weather-desc">Locatie ophalen...</div>
       <div class="weather-location">GPS scan...</div>
     </div>
     <div class="weather-details">
       <div class="weather-detail">
         <div class="weather-detail-label">Luchtvochtigheid</div>
         <div class="weather-detail-value" id="weather-hum">--%</div>
       </div>
       <div class="weather-detail">
         <div class="weather-detail-label">Windsnelheid</div>
         <div class="weather-detail-value" id="weather-wind">-- km/u</div>
       </div>
       <div class="weather-detail">
         <div class="weather-detail-label">Druk</div>
         <div class="weather-detail-value" id="weather-pres">-- hPa</div>
       </div>
       <div class="weather-detail">
         <div class="weather-detail-label">Zicht</div>
         <div class="weather-detail-value" id="weather-vis">-- km</div>
       </div>
     </div>
     <div class="weather-input">
       <input type="text" id="weather-city" placeholder="Stad (bijv: Amsterdam)" />
       <button onclick="getWeather()">ZOEK</button>
     </div>
   </div>
   <div class="win-status"><span>Data: Open-Meteo</span><span>No API key</span></div>
   <div class="win-resize">‚ó¢</div>
 </div>

</div>

<!-- TASKBAR -->

<div id="taskbar">
 <button id="start-btn" onclick="toggleStart()">‚ñ∂ START</button>
 <div id="taskbar-apps"></div>
 <div class="task-clock" id="clock"></div>
</div>

<!-- START MENU -->

<div id="start-menu">
 <div class="sm-header">DIRKX-OS</div>
 <ul>
   <li onclick="openWin('win-media')"><span class="ico">üì∫</span> Free Media</li>
   <li onclick="openWin('win-books')"><span class="ico">üìö</span> Bibliotheek</li>
   <li onclick="openWin('win-vault')"><span class="ico">üîê</span> Vault</li>
   <li onclick="openWin('win-term')"><span class="ico">‚å®Ô∏è</span> Terminal</li>
   <li onclick="openWin('win-about')"><span class="ico">‚öôÔ∏è</span> Systeem Info</li>
   <li onclick="openWin('win-syslog')"><span class="ico">üìã</span> Sys Log</li>
   <li onclick="openWin('win-notes')"><span class="ico">üìù</span> Notities</li>
   <li onclick="openWin('win-proxy')"><span class="ico">üõ°Ô∏è</span> Proxy</li>
   <li onclick="openWin('win-qr')"><span class="ico">‚ñ£</span> QR Gen</li>
   <li onclick="openWin('win-file')"><span class="ico">üìÅ</span> File Scan</li>
   <li onclick="openWin('win-weather')"><span class="ico">üå§Ô∏è</span> Weer</li>
 </ul>
</div>

<script>
/* ===================== BOOT SEQUENCE ===================== */
const bootLines = [
 {t:"DIRKX BIOS v2.4 ‚Äî Industrial Core Edition", delay:200},
 {t:"CPU: DIRKX-8086 @ 33MHz .............. OK", delay:500},
 {t:"RAM: 640K base + 8192K extended ....... OK", delay:700},
 {t:"Initiating storage controller ......... OK", delay:900},
 {t:"Loading vault kernel ...................", delay:1100},
 {t:"Vault kernel checksum: PASSED ......... OK", delay:1500},
 {t:"Mounting media filesystem ..............", delay:1700},
 {t:"Free media index: ONLINE .............. OK", delay:2000},
 {t:"Starting DIRKX-OS .......................", delay:2300, bright:true},
 {t:"Clearance level: STANDARD", delay:2600, bright:true},
];

const bootEl = document.getElementById('boot');
bootEl.addEventListener('click', () => { bootEl.classList.add('hidden'); });

function runBoot() {
 bootLines.forEach(({t, delay, bright}) => {
   setTimeout(() => {
     const line = document.createElement('div');
     line.className = 'boot-line' + (bright ? ' bright' : '');
     line.textContent = t;
     bootEl.appendChild(line);
   }, delay);
 });
 setTimeout(() => {
   bootEl.classList.add('hidden');
   addSyslog('INFO','Sistema gestart ‚Äî clearance: STANDARD','ok');
   addSyslog('INFO','Free media index geladen','ok');
   addSyslog('WARN','Vault vergrendeld ‚Äî authenticatie vereist','warn');
 }, 4200);
}

if (document.readyState === 'loading') {
 document.addEventListener('DOMContentLoaded', runBoot);
} else {
 runBoot();
}

/* ===================== CLOCK & UPTIME ===================== */
const startTime = Date.now();
function updateClock() {
 const now = new Date();
 document.getElementById('clock').textContent =
   now.toLocaleTimeString('nl-NL', {hour:'2-digit',minute:'2-digit',second:'2-digit'});
 const up = Math.floor((Date.now()-startTime)/1000);
 const h=String(Math.floor(up/3600)).padStart(2,'0');
 const m=String(Math.floor((up%3600)/60)).padStart(2,'0');
 const s=String(up%60).padStart(2,'0');
 const ut = document.getElementById('uptime');
 if(ut) ut.textContent = `${h}:${m}:${s}`;
}
setInterval(updateClock, 1000);
updateClock();

/* ===================== SYSLOG ===================== */
function addSyslog(level, msg, cls='') {
 const body = document.getElementById('syslog-body');
 if (!body) return;
 const ts = new Date().toLocaleTimeString('nl-NL');
 const line = document.createElement('div');
 line.className = cls ? `slog-${cls}` : '';
 line.textContent = `[${ts}] [${level}] ${msg}`;
 body.appendChild(line);
 body.scrollTop = body.scrollHeight;
}

/* ===================== WINDOWS ===================== */
let zTop = 200;
const openWindows = {};

function openWin(id) {
 const w = document.getElementById(id);
 if (!w) return;
 w.classList.add('open');
 w.style.zIndex = ++zTop;
 // Centreer het venster op het scherm
 const dw = w.offsetWidth || 400;
 const dh = w.offsetHeight || 280;
 const vw = window.innerWidth;
 const vh = window.innerHeight - 36;
 const left = Math.max(10, Math.min(Math.round((vw - dw) / 2), vw - dw - 10));
 const top  = Math.max(10, Math.min(Math.round((vh - dh) / 3), vh - dh - 10));
 w.style.left = left + 'px';
 w.style.top  = top  + 'px';
 openWindows[id] = true;
 updateTaskbar();
 addSyslog('INFO', `Venster geopend: ${id.replace('win-','')}`, '');
 makeDraggable(w);
 makeResizable(w);
 
 // Initialize specific windows
 if(id === 'win-notes') initNotes();
 if(id === 'win-proxy') initProxy();
 if(id === 'win-file') initFileScanner();
 if(id === 'win-weather') getWeather();
}

function closeWin(id) {
 const w = document.getElementById(id);
 if (!w) return;
 w.classList.remove('open');
 delete openWindows[id];
 updateTaskbar();
}

function focusWin(id) {
 const w = document.getElementById(id);
 if (!w) return;
 w.style.zIndex = ++zTop;
}

function updateTaskbar() {
 const bar = document.getElementById('taskbar-apps');
 bar.innerHTML = '';
 Object.keys(openWindows).forEach(id => {
   const btn = document.createElement('div');
   btn.className = 'taskbar-app active';
   const labels = {
     'win-media':'üì∫ MEDIA','win-books':'üìö BOEKEN','win-vault':'üîê VAULT',
     'win-term':'‚å®Ô∏è TERM','win-about':'‚öôÔ∏è SYSTEEM','win-syslog':'üìã LOG',
     'win-notes':'üìù NOTES','win-proxy':'üõ°Ô∏è PROXY','win-qr':'‚ñ£ QR',
     'win-file':'üìÅ FILE','win-weather':'üå§Ô∏è WEER'
   };
   btn.textContent = labels[id] || id;
   btn.onclick = () => focusWin(id);
   bar.appendChild(btn);
 });
}

/* ===================== DRAG ===================== */
function makeDraggable(win) {
 const bar = win.querySelector('.win-titlebar');
 if (bar._dragSet) return;
 bar._dragSet = true;
 let ox=0,oy=0,dragging=false;
 bar.addEventListener('mousedown', e => {
   if (e.target.closest('.win-close')) return;
   dragging = true;
   ox = e.clientX - win.offsetLeft;
   oy = e.clientY - win.offsetTop;
   win.style.zIndex = ++zTop;
   e.preventDefault();
 });
 document.addEventListener('mousemove', e => {
   if (!dragging) return;
   win.style.left = (e.clientX - ox) + 'px';
   win.style.top = Math.max(0, e.clientY - oy) + 'px';
 });
 document.addEventListener('mouseup', () => { dragging = false; });
}

/* ===================== RESIZE ===================== */
function makeResizable(win) {
 const handle = win.querySelector('.win-resize');
 if (!handle || handle._resizeSet) return;
 handle._resizeSet = true;
 let resizing=false, sx=0,sy=0,sw=0,sh=0;
 handle.addEventListener('mousedown', e => {
   resizing=true; sx=e.clientX; sy=e.clientY;
   sw=win.offsetWidth; sh=win.offsetHeight;
   e.preventDefault(); e.stopPropagation();
 });
 document.addEventListener('mousemove', e => {
   if (!resizing) return;
   win.style.width = Math.max(260, sw+(e.clientX-sx)) + 'px';
   win.style.height = Math.max(160, sh+(e.clientY-sy)) + 'px';
 });
 document.addEventListener('mouseup', () => { resizing=false; });
}

/* ===================== START MENU ===================== */
const startMenu = document.getElementById('start-menu');
function toggleStart() {
 startMenu.classList.toggle('open');
}
document.addEventListener('click', e => {
 if (!e.target.closest('#start-menu') && !e.target.closest('#start-btn')) {
   startMenu.classList.remove('open');
 }
});

/* ===================== VAULT / PIN ===================== */
let clearance = 0;
let pinEntry = [];
const PIN = [1,3,3,7];

// Build pin buttons
const pinBtns = document.getElementById('pin-buttons');
if (pinBtns) {
 for (let i=1; i<=9; i++) {
   const b = document.createElement('button');
   b.className='pin-btn'; b.textContent=i;
   b.onclick=()=>enterPin(i);
   pinBtns.appendChild(b);
 }
 const b0 = document.createElement('button');
 b0.className='pin-btn'; b0.textContent='0';
 b0.onclick=()=>enterPin(0);
 pinBtns.appendChild(b0);
 const bc = document.createElement('button');
 bc.className='pin-btn'; bc.textContent='C';
 bc.onclick=()=>{ pinEntry=[]; updatePinDisplay(); };
 pinBtns.appendChild(bc);
}

function updatePinDisplay() {
 const d = document.getElementById('pin-display');
 if(!d) return;
 let str = '';
 for (let i=0;i<4;i++) str += (i < pinEntry.length ? '‚óè' : '_') + ' ';
 d.textContent = str.trim();
}

function enterPin(n) {
 if (pinEntry.length >= 4) return;
 pinEntry.push(n);
 updatePinDisplay();
 if (pinEntry.length === 4) {
   if (JSON.stringify(pinEntry) === JSON.stringify(PIN)) {
     unlockVault();
   } else {
     setTimeout(()=>{ pinEntry=[]; updatePinDisplay(); addSyslog('ERR','PIN incorrect','err'); }, 600);
   }
 }
}

function unlockVault(godmode=false) {
 clearance = godmode ? 2 : 1;
 document.getElementById('vault-locked').style.display='none';
 document.getElementById('vault-unlocked').style.display='block';
 document.getElementById('vault-status').textContent = godmode ? 'GODMODE' : 'VRIJGEGEVEN';
 document.getElementById('about-clearance').textContent = godmode ? 'GODMODE' : 'VAULT';
 document.getElementById('about-vault').textContent = 'VRIJGEGEVEN';
 achievement(godmode ? 'üîì GODMODE GEACTIVEERD' : 'üîì Vault vrijgegeven ‚Äî clearance: VAULT');
 addSyslog('OK','Vault ontgrendeld ‚Äî clearance verhoogd','ok');
}

/* ===================== TERMINAL ===================== */
const termOut = document.getElementById('term-output');
const termIn = document.getElementById('term-input');
const help = `Beschikbare commando's:
 help        ‚Äî dit scherm
 unlock      ‚Äî vault vrijgeven
 media       ‚Äî open media venster
 boeken      ‚Äî open bibliotheek
 vault       ‚Äî open vault
 notes       ‚Äî open notities
 proxy       ‚Äî open proxy gateway
 qr          ‚Äî open QR generator
 file        ‚Äî open file scanner
 weather     ‚Äî open weerstation
 ip          ‚Äî toon IP adres
 clear       ‚Äî wis terminal`;

function tlog(msg, cls='') {
 const d = document.createElement('div');
 d.className = 'term-line' + (cls ? ' '+cls : '');
 d.innerHTML = msg;
 termOut.appendChild(d);
 termOut.scrollTop = termOut.scrollHeight;
}

if (termIn) {
 termIn.addEventListener('keydown', e => {
   if (e.key !== 'Enter') return;
   const cmd = termIn.value.trim().toLowerCase();
   termIn.value = '';
   tlog('$ ' + cmd, 'cmd');
   addSyslog('CMD', cmd);
   switch(cmd) {
     case 'help': tlog(help.replace(/\n/g,'<br>')); break;
     case 'unlock':
       unlockVault();
       openWin('win-vault');
       tlog('Vault vrijgegeven.','ok');
       break;
     case 'media': openWin('win-media'); tlog('Media venster geopend.','ok'); break;
     case 'boeken': openWin('win-books'); tlog('Bibliotheek geopend.','ok'); break;
     case 'vault': openWin('win-vault'); tlog('Vault geopend.','ok'); break;
     case 'notes': openWin('win-notes'); tlog('Notities geopend.','ok'); break;
     case 'proxy': openWin('win-proxy'); tlog('Proxy gateway geopend.','ok'); break;
     case 'qr': openWin('win-qr'); tlog('QR generator geopend.','ok'); break;
     case 'file': openWin('win-file'); tlog('File scanner geopend.','ok'); break;
     case 'weather': openWin('win-weather'); tlog('Weerstation geopend.','ok'); break;
     case 'ip':
       fetch('https://api.ipify.org?format=json')
         .then(r=>r.json())
         .then(d=>tlog(`Publiek IP: ${d.ip}`,'ok'))
         .catch(()=>tlog('IP ophalen mislukt ‚Äî offline?','err'));
       break;
     case 'clear': termOut.innerHTML=''; break;
     case 'easter':
       unlockVault(true);
       achievement('ü•ö Easter egg gevonden!');
       tlog('GODMODE geactiveerd.','ok');
       break;
     case 'dirkx':
       achievement('‚öôÔ∏è Metal ¬∑ Systems ¬∑ Economy');
       tlog('Systeem: DIRKX TECHNIEK ‚Äî industri√´le kern actief.','ok');
       break;
     default:
       tlog(`Onbekend commando: "${cmd}" ‚Äî type help`,'err');
   }
 });
}

/* ===================== ACHIEVEMENT ===================== */
let achTimer;
function achievement(msg) {
 const el = document.getElementById('achievement');
 el.textContent = msg;
 el.style.display = 'block';
 clearTimeout(achTimer);
 achTimer = setTimeout(() => el.style.display='none', 3500);
}

/* ===================== KONAMI ===================== */
let kseq = [];
const KONAMI = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
document.addEventListener('keydown', e => {
 kseq.push(e.key);
 if (kseq.length > KONAMI.length) kseq.shift();
 if (JSON.stringify(kseq) === JSON.stringify(KONAMI)) {
   unlockVault(true);
   document.getElementById('konami-bar').classList.add('active');
   openWin('win-vault');
   addSyslog('WARN','Konami code gedetecteerd ‚Äî GODMODE','warn');
 }
});

/* ===================== RANDOM SYSLOG EVENTS ===================== */
const events = [
 ['INFO','Media index sync voltooid','ok'],
 ['INFO','Vault integriteitscontrole: PASSED','ok'],
 ['WARN','Ongewone activiteit gedetecteerd op poort 1337','warn'],
 ['INFO','CRT kalibratie uitgevoerd',''],
 ['INFO','Geheugentest: 640K vrij',''],
 ['WARN','Onbekende verbindingspoging geblokkeerd','warn'],
];
setInterval(() => {
 const [l,m,c] = events[Math.floor(Math.random()*events.length)];
 addSyslog(l,m,c);
}, 8000);

/* ===================== SECURE NOTES ===================== */
let notes = [];
let currentNote = null;

function initNotes() {
 loadNotes();
 renderNotes();
}

function loadNotes() {
 const saved = localStorage.getItem('dirkx_notes');
 if(saved) {
   try {
     notes = JSON.parse(saved);
   } catch(e) {
     notes = [];
   }
 }
 updateNoteCount();
}

function saveNotes() {
 localStorage.setItem('dirkx_notes', JSON.stringify(notes));
 updateNoteCount();
}

function updateNoteCount() {
 const el = document.getElementById('note-count');
 if(el) el.textContent = `${notes.length} notitie${notes.length !== 1 ? 's' : ''}`;
}

function renderNotes() {
 const list = document.getElementById('notes-list');
 if(!list) return;
 list.innerHTML = '';
 
 notes.forEach((note, idx) => {
   const item = document.createElement('div');
   item.className = 'note-item' + (currentNote === idx ? ' selected' : '');
   item.innerHTML = `
     <span class="note-title">${note.title || 'Naamloos'}</span>
     <span class="note-date">${new Date(note.date).toLocaleDateString('nl-NL')}</span>
   `;
   item.onclick = () => selectNote(idx);
   list.appendChild(item);
 });
}

function selectNote(idx) {
 currentNote = idx;
 document.getElementById('note-editor').value = notes[idx].content;
 renderNotes();
 updateStatus('Notitie geladen');
}

function newNote() {
 currentNote = null;
 document.getElementById('note-editor').value = '';
 renderNotes();
 updateStatus('Nieuwe notitie');
}

function saveNote() {
 const content = document.getElementById('note-editor').value;
 if(!content.trim()) {
   updateStatus('Lege notitie ‚Äî niet opgeslagen');
   return;
 }
 
 const title = content.split('\n')[0].substring(0, 30) || 'Naamloos';
 const note = {
   title: title,
   content: content,
   date: Date.now()
 };
 
 if(currentNote !== null) {
   notes[currentNote] = note;
 } else {
   notes.push(note);
   currentNote = notes.length - 1;
 }
 
 saveNotes();
 renderNotes();
 updateStatus('Opgeslagen');
 addSyslog('INFO','Notitie opgeslagen','ok');
}

function deleteNote() {
 if(currentNote === null) {
   updateStatus('Geen notitie geselecteerd');
   return;
 }
 
 notes.splice(currentNote, 1);
 currentNote = null;
 document.getElementById('note-editor').value = '';
 saveNotes();
 renderNotes();
 updateStatus('Verwijderd');
 addSyslog('WARN','Notitie verwijderd','warn');
}

function updateStatus(msg) {
 const el = document.getElementById('note-status');
 if(el) el.textContent = msg;
}

/* ===================== PROXY GATEWAY ===================== */
let selectedProxy = '12ft';
let proxyHistory = [];

function initProxy() {
 // Load history
 const saved = localStorage.getItem('dirkx_proxy_history');
 if(saved) {
   try {
     proxyHistory = JSON.parse(saved);
     renderProxyHistory();
   } catch(e) {}
 }
 
 // Select options
 document.querySelectorAll('.proxy-option').forEach(opt => {
   opt.onclick = () => {
     document.querySelectorAll('.proxy-option').forEach(o => o.classList.remove('selected'));
     opt.classList.add('selected');
     selectedProxy = opt.dataset.service;
   };
 });
}

function openProxy() {
 const url = document.getElementById('proxy-url').value.trim();
 if(!url) return;
 
 let finalUrl = '';
 switch(selectedProxy) {
   case '12ft':
     finalUrl = `https://12ft.io/${url}`;
     break;
   case 'archive':
     finalUrl = `https://web.archive.org/web/*/${url}`;
     break;
   case 'textise':
     finalUrl = `https://r.jina.ai/http://${url.replace(/^https?:\/\//, '')}`;
     break;
   case 'google':
     finalUrl = `https://webcache.googleusercontent.com/search?q=cache:${url}`;
     break;
 }
 
 // Save to history
 proxyHistory.unshift({url, service: selectedProxy, date: Date.now()});
 if(proxyHistory.length > 10) proxyHistory.pop();
 localStorage.setItem('dirkx_proxy_history', JSON.stringify(proxyHistory));
 renderProxyHistory();
 
 // Open
 window.open(finalUrl, '_blank');
 addSyslog('INFO',`Proxy redirect: ${selectedProxy}`,'ok');
}

function renderProxyHistory() {
 const container = document.getElementById('proxy-history');
 if(!container) return;
 container.innerHTML = '';
 
 proxyHistory.slice(0, 5).forEach(h => {
   const div = document.createElement('div');
   div.className = 'history-item';
   div.textContent = `${h.service}: ${h.url.substring(0, 40)}...`;
   div.onclick = () => {
     document.getElementById('proxy-url').value = h.url;
   };
   container.appendChild(div);
 });
}

/* ===================== QR GENERATOR ===================== */
let qrCanvas = null;

function generateQR() {
 const text = document.getElementById('qr-text').value.trim();
 if(!text) return;
 
 const display = document.getElementById('qr-display');
 display.innerHTML = '';
 
 const canvas = document.createElement('canvas');
 canvas.width = 200;
 canvas.height = 200;
 const ctx = canvas.getContext('2d');
 
 drawQRPattern(ctx, text);
 
 display.appendChild(canvas);
 qrCanvas = canvas;
 
 document.getElementById('qr-download').style.display = 'block';
 addSyslog('INFO','QR code gegenereerd','ok');
}

function drawQRPattern(ctx, text) {
 const size = 25;
 const cell = 8;
 
 ctx.fillStyle = '#fff';
 ctx.fillRect(0, 0, 200, 200);
 ctx.fillStyle = '#000';
 
 let hash = 0;
 for(let i=0; i<text.length; i++) {
   hash = ((hash << 5) - hash) + text.charCodeAt(i);
   hash |= 0;
 }
 
 for(let y=0; y<7; y++) {
   for(let x=0; x<7; x++) {
     if(x===0 || x===6 || y===0 || y===6 || (x>1 && x<5 && y>1 && y<5)) {
       ctx.fillRect(x*cell, y*cell, cell, cell);
       ctx.fillRect((size-1-x)*cell, y*cell, cell, cell);
       ctx.fillRect(x*cell, (size-1-y)*cell, cell, cell);
     }
   }
 }
 
 for(let y=8; y<size-8; y++) {
   for(let x=8; x<size-8; x++) {
     const bit = (hash >> ((x*y)%32)) & 1;
     if(bit) ctx.fillRect(x*cell, y*cell, cell, cell);
   }
 }
 
 ctx.font = '8px monospace';
 ctx.fillStyle = '#000';
 ctx.fillText(text.substring(0,10), 10, 195);
}

function downloadQR() {
 if(!qrCanvas) return;
 const link = document.createElement('a');
 link.download = 'dirkx-qr.png';
 link.href = qrCanvas.toDataURL();
 link.click();
 addSyslog('INFO','QR code gedownload','ok');
}

/* ===================== FILE SCANNER ===================== */
let currentFile = null;

function initFileScanner() {
 const dropZone = document.getElementById('drop-zone');
 const fileInput = document.getElementById('file-input');
 
 dropZone.onclick = () => fileInput.click();
 
 fileInput.onchange = (e) => {
   if(e.target.files.length) handleFile(e.target.files[0]);
 };
 
 dropZone.ondragover = (e) => {
   e.preventDefault();
   dropZone.classList.add('dragover');
 };
 
 dropZone.ondragleave = () => {
   dropZone.classList.remove('dragover');
 };
 
 dropZone.ondrop = (e) => {
   e.preventDefault();
   dropZone.classList.remove('dragover');
   if(e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]);
 };
}

function handleFile(file) {
 currentFile = file;
 
 document.getElementById('file-info').classList.add('show');
 document.getElementById('file-name').textContent = file.name;
 document.getElementById('file-size').textContent = formatBytes(file.size);
 document.getElementById('file-type').textContent = file.type || 'Onbekend';
 document.getElementById('file-date').textContent = new Date(file.lastModified).toLocaleString('nl-NL');
 
 const fakeHash = Array(64).fill(0).map(() => '0123456789abcdef'[Math.floor(Math.random()*16)]).join('');
 document.getElementById('file-hash').textContent = fakeHash;
 
 const reader = new FileReader();
 reader.onload = (e) => {
   const bytes = new Uint8Array(e.target.result);
   const hex = Array.from(bytes).map(b => b.toString(16).padStart(2,'0')).join(' ');
   const ascii = Array.from(bytes).map(b => b>=32 && b<127 ? String.fromCharCode(b) : '.').join('');
   document.getElementById('file-hex').textContent = `HEX: ${hex.substring(0, 96)}\nASCII: ${ascii.substring(0, 48)}`;
 };
 reader.readAsArrayBuffer(file.slice(0, 48));
 
 addSyslog('INFO',`Bestand gescand: ${file.name}`,'ok');
}

function formatBytes(bytes) {
 if(bytes === 0) return '0 B';
 const k = 1024;
 const sizes = ['B', 'KB', 'MB', 'GB'];
 const i = Math.floor(Math.log(bytes) / Math.log(k));
 return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

function scanFile() {
 const progress = document.getElementById('scan-progress');
 const fill = document.getElementById('scan-fill');
 const result = document.getElementById('scan-result');
 
 progress.classList.add('show');
 fill.style.width = '0%';
 result.textContent = 'Scanning...';
 
 let pct = 0;
 const interval = setInterval(() => {
   pct += Math.random() * 15;
   if(pct > 100) pct = 100;
   fill.style.width = pct + '%';
   
   if(pct === 100) {
     clearInterval(interval);
     setTimeout(() => {
       progress.classList.remove('show');
       const clean = Math.random() > 0.1;
       result.innerHTML = clean ? 
         '<span style="color:var(--green)">‚úì GEEN BEDREIGINGEN GEVONDEN</span>' :
         '<span style="color:var(--red)">‚ö† VERDACHT PATROON GEDETECTEERD</span>';
       if(!clean) addSyslog('WARN','Verdacht bestand gedetecteerd','warn');
     }, 300);
   }
 }, 100);
}

/* ===================== WEATHER ===================== */
function getWeather() {
 const city = document.getElementById('weather-city').value.trim() || 'Amsterdam';
 
 fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`)
   .then(r => r.json())
   .then(geo => {
     if(!geo.results || !geo.results[0]) throw new Error('Stad niet gevonden');
     const { latitude, longitude, name, country } = geo.results[0];
     
     return fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m,surface_pressure,visibility`);
   })
   .then(r => r.json())
   .then(data => {
     const current = data.current;
     document.querySelector('.weather-temp').textContent = Math.round(current.temperature_2m) + '¬∞';
     document.querySelector('.weather-desc').textContent = getWeatherDesc(current.weather_code);
     document.querySelector('.weather-location').textContent = city;
     document.getElementById('weather-hum').textContent = current.relative_humidity_2m + '%';
     document.getElementById('weather-wind').textContent = current.wind_speed_10m + ' km/u';
     document.getElementById('weather-pres').textContent = Math.round(current.surface_pressure) + ' hPa';
     document.getElementById('weather-vis').textContent = (current.visibility / 1000).toFixed(1) + ' km';
     
     addSyslog('INFO',`Weerdata opgehaald: ${city}`,'ok');
   })
   .catch(err => {
     document.querySelector('.weather-desc').textContent = 'Fout: ' + err.message;
     addSyslog('ERR','Weerdata ophalen mislukt','err');
   });
}

function getWeatherDesc(code) {
 const codes = {
   0: 'Onbewolkt',
   1: 'Overwegend helder', 2: 'Gedeeltelijk bewolkt', 3: 'Bewolkt',
   45: 'Mist', 48: 'Mist met rijp',
   51: 'Lichte motregen', 53: 'Motregen', 55: 'Dichte motregen',
   61: 'Lichte regen', 63: 'Regen', 65: 'Zware regen',
   71: 'Lichte sneeuw', 73: 'Sneeuw', 75: 'Zware sneeuw',
   95: 'Onweer', 96: 'Onweer met hagel'
 };
 return codes[code] || 'Onbekend';
}

/* ===================== SCREEN FLICKER EFFECT ===================== */
setInterval(() => {
 if(Math.random() > 0.95) {
   document.body.style.filter = 'brightness(1.1)';
   setTimeout(() => {
     document.body.style.filter = 'brightness(1)';
   }, 50);
 }
}, 3000);
</script>

</body>
</html>
